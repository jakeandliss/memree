//load endless pagination for entries
<% if params[:page].present? %> 
 	$('#entries-wrapper').append('<%= j render(@entries) %>');
	$('.pagination').replaceWith('<%= j will_paginate(@entries) %>');
  <% unless @entries.next_page %>
    $('.pagination').remove();
    $("#image-loader").remove();
  <% end %>
<% else %>
  $('#entries-wrapper').html('<%= j render partial: "entries" %>');
<% end %>


  // Highlight active eliments of the tag menu
  $("#label_titles .active").removeClass("active");

  var activeElement = $('#label_titles [data-tagname="<%=params[:tag]%>"]');
  var activeTag = activeElement.parent();
  activeTag.addClass("active");
  activeElement.addClass("active");

  var tagName = '<%=params[:tag] ? params[:tag].downcase : "all entries"%>';
  var tag = '<%=params[:tag] ? params[:tag]: "all entries"%>';

  if (tagName == "all entries"){
    $("#search .fa-close").hide();
    $('.bootstrap-tagsinput .tag [data-role="remove"]').trigger('click');
    $('.bootstrap-tagsinput input[type="text"]').val('');
  }
  else {
    $("#search .fa-close").show();
    $('.bootstrap-tagsinput .tag [data-role="remove"]').trigger('click');
    $('.bootstrap-tagsinput input[type="text"]').val(tag);
  }

  $("#search-tag").html(tagName);


  if (!activeElement.is(":visible")){
    activeElement.parents("li").addClass("expanded");
  }
 
  

<% if @entries.blank? %>
  $('.pagination').detach();
<% end %>

$('#image-loader').hide();